<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
        <html>
        <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
</head>

<body>
<a-scene
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
>

    <a-text
            value=""
            scale="1 1 1"
            gps-entity-place="latitude: 50.060902; longitude: 19.904467;"
    >

        <!-- Główny wał - podkowa -->
        <a-entity id="main-rampart"></a-entity>

        <!-- Wał II - pierwszy dodatkowy łuk -->
        <a-entity id="secondary-rampart"></a-entity>

        <!-- Wał III - drugi dodatkowy łuk -->
        <a-entity id="tertiary-rampart"></a-entity>

        <!-- Mgła -->
        <a-entity particle-system="preset: dust; particleCount: 50000; color: #ffffff; size: 0.2; opacity: 0.9;"></a-entity>

        <script>
    function createRampart(entityId, segments, radius, offsetY, height, color) {
      const rampart = document.querySelector(entityId);
      for (let i = 0; i < segments; i++) {
        const angle = (i / segments) * Math.PI; // półokrąg (podkowa)
        const x = radius * Math.cos(angle);
        const z = radius * Math.sin(angle);
        const rotation = (angle * 180) / Math.PI;

        const box = document.createElement('a-box');
        box.setAttribute('position', `${x} ${offsetY} ${z}`);
        box.setAttribute('rotation', `0 ${-rotation} 0`);
        box.setAttribute('width', 0.2);
        box.setAttribute('height', height);
        box.setAttribute('depth', 2);
        box.setAttribute('color', color);
        box.setAttribute('opacity', 0.5);
        box.setAttribute('transparent', true);

        // Animacja przesunięcia (efekt drżenia)
        box.setAttribute('animation', `property: position; to: ${x} ${offsetY + 0.1} ${z};
                                        dir: alternate; dur: 3000; loop: true`);

        rampart.appendChild(box);
      }
    }

    // Główny wał - podkowa, wyższy
    createRampart('#main-rampart', 25, 20, 1, 3, '#444444');

    // Wał II - pierwszy łuk od północy, średnia wysokość
    createRampart('#secondary-rampart', 30, 25, 0.5, 2, '#666666');

    // Wał III - drugi łuk od północy, niższy
    createRampart('#tertiary-rampart', 40, 30, 0, 1, '#888888');
  </script>
    </a-text>

    <a-camera gps-camera rotation-reader gpsMinDistance="1" positionMinAccuracy="30"></a-camera>
</a-scene>
</body>
<script>alert(6);</script>

</html>